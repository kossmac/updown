{% load static %}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hello Bulma!</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.0/js/all.js"></script>
    <script defer src="{% static "js/script.js" %}"></script>
</head>
<body>
<section class="section">
    <div class="container">
        <h1 class="title">
            Manage files
        </h1>
    </div>
</section>
<section class="section">
    <div class="container">
        <form action="{% url 'add' %}" method="post">
            {% csrf_token %}
            <div class="field">
                <div class="file is-large is-centered is-boxed has-name">
                    <label class="file-label">
                        {{ upload_form.file }}
                        <span class="file-cta">
                            <span class="file-icon">
                                <i class="fas fa-upload"></i>
                            </span>
                            <span class="file-label">
                              Upload new fileâ€¦
                            </span>
                        </span>
                        <span class="file-name" id="filename"></span>
                    </label>
                </div>
            </div>
            {{ upload_form.password.label_tag }}
            {{ upload_form.password }}
            {{ upload_form.expires_at.label_tag }}
            {{ upload_form.expires_at }}
            <input type="submit" class="button" value="Submit" />
        </form>
    </div>
</section>

<section class="section">
    <div class="container">
        {% for updownfile in updownfile_list %}
            <div class="box">
                <article class="media">
                    <div class="media-left">
                        <figure class="image is-64x64">
                            <img src="https://bulma.io/images/placeholders/128x128.png" alt="Image">
                        </figure>
                    </div>
                    <div class="media-content">
                        <div class="content">
                            <p>
                                <strong>{{ updownfile }}</strong> <small>@{{ updownfile.created_at }}</small> <small>({{ updownfile.owner.username }})</small>
                            </p>
                        </div>
                        <nav class="level is-mobile">
                            <div class="level-left">
                                <form method="POST" action="{% url "delete" updownfile.slug %}">
                                    {% csrf_token %}
                                    <button type="submit" value="DELETE">
                                        <span class="icon is-small"><i class="fas fa-trash-alt"></i></span>
                                    </button>
                                </form>
                            </div>
                        </nav>
                    </div>
                </article>
            </div>
        {% endfor %}
    </div>
</section>
<footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <p>
                <strong>UpDown</strong> by Karsten Kosmala. The source code is licensed
                <a href="http://opensource.org/licenses/mit-license.php">MIT</a>. The website content
                is licensed <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY NC SA 4.0</a>.
            </p>
        </div>
    </div>
</footer>
</body>
</html>